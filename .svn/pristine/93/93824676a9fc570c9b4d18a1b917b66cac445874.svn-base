{
  "version": 3,
  "sources": ["../../@jeecg/online/AuthFieldConfig.js"],
  "sourcesContent": ["var __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nimport { defineComponent, ref, watch, resolveComponent, openBlock, createElementBlock, createVNode, withCtx, createTextVNode } from \"vue\";\nimport { BasicTable, useTable } from \"/@/components/Table\";\nimport { a as authFieldLoadData, b as authFieldUpdateStatus, c as authFieldUpdateCheckbox } from \"./auth.api.js\";\nimport { a as authFieldColumns } from \"./auth.data.js\";\nimport { _ as _export_sfc } from \"./index.js\";\nimport \"/@/utils/http/axios\";\nimport \"/@/components/jeecg/OnLine/JPopupOnlReport.vue\";\nimport \"/@/hooks/web/useMessage\";\nimport \"vue-router\";\nvar AuthFieldConfig_vue_vue_type_style_index_0_scoped_true_lang = \"\";\nconst _sfc_main = defineComponent({\n  name: \"AuthFieldConfig\",\n  components: { BasicTable },\n  props: {\n    headId: {\n      type: String,\n      default: \"\",\n      required: true\n    }\n  },\n  emits: [\"update:authFields\"],\n  setup(props, { emit }) {\n    const cgformId = ref(\"\");\n    const [registerTable, { reload }] = useTable({\n      api: loadData,\n      rowKey: \"code\",\n      bordered: true,\n      columns: authFieldColumns,\n      showIndexColumn: false\n    });\n    watch(() => props.headId, (headId) => {\n      cgformId.value = headId.split(\"?\")[0];\n      reload().catch(() => null);\n    }, { immediate: true });\n    function loadData(params) {\n      return __async(this, null, function* () {\n        const exclude = [\"id\"];\n        let data = yield authFieldLoadData(cgformId.value, params);\n        let fields = [];\n        let filterData = [];\n        data.forEach((item) => {\n          if (exclude.indexOf(item.code) < 0) {\n            if (item.isShowForm == 1 || item.isShowList == 1) {\n              filterData.push(item);\n            }\n            fields.push({ text: item.title, value: item.code });\n          }\n        });\n        emit(\"update:authFields\", fields);\n        return filterData;\n      });\n    }\n    function onUpdateStatus(flag, record) {\n      return __async(this, null, function* () {\n        yield authFieldUpdateStatus({\n          cgformId: cgformId.value,\n          code: record.code,\n          status: flag ? 1 : 0\n        });\n        if (!(record.formEditable || record.formShow || record.listShow)) {\n          record.formEditable = true;\n          record.formShow = true;\n          record.listShow = true;\n        }\n        record.status = Math.abs(record.status - 1);\n      });\n    }\n    function onCheckboxChange(event, record, switchFlag) {\n      return __async(this, null, function* () {\n        let checked = event.target.checked;\n        yield authFieldUpdateCheckbox({\n          cgformId: cgformId.value,\n          code: record.code,\n          switchFlag,\n          listShow: checked,\n          formShow: checked,\n          formEditable: checked\n        });\n        if (switchFlag == 1) {\n          record.listShow = checked;\n        } else if (switchFlag == 2) {\n          record.formShow = checked;\n        } else if (switchFlag == 3) {\n          record.formEditable = checked;\n        }\n      });\n    }\n    return { registerTable, onUpdateStatus, onCheckboxChange };\n  }\n});\nconst _hoisted_1 = { class: \"auth-field-config\" };\nconst _hoisted_2 = /* @__PURE__ */ createTextVNode(\" \\u53EF\\u89C1 \");\nconst _hoisted_3 = /* @__PURE__ */ createTextVNode(\" \\u53EF\\u89C1 \");\nconst _hoisted_4 = /* @__PURE__ */ createTextVNode(\" \\u53EF\\u7F16\\u8F91 \");\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_switch = resolveComponent(\"a-switch\");\n  const _component_a_checkbox = resolveComponent(\"a-checkbox\");\n  const _component_BasicTable = resolveComponent(\"BasicTable\");\n  return openBlock(), createElementBlock(\"div\", _hoisted_1, [\n    createVNode(_component_BasicTable, { onRegister: _ctx.registerTable }, {\n      switch: withCtx(({ text, record }) => [\n        createVNode(_component_a_switch, {\n          size: \"small\",\n          checked: record.status === 1,\n          onChange: (flag) => _ctx.onUpdateStatus(flag, record)\n        }, null, 8, [\"checked\", \"onChange\"])\n      ]),\n      list: withCtx(({ text, record }) => [\n        createVNode(_component_a_checkbox, {\n          checked: record.listShow,\n          disabled: record.status === 0,\n          onChange: (e) => _ctx.onCheckboxChange(e, record, 1)\n        }, {\n          default: withCtx(() => [\n            _hoisted_2\n          ]),\n          _: 2\n        }, 1032, [\"checked\", \"disabled\", \"onChange\"])\n      ]),\n      form: withCtx(({ text, record }) => [\n        createVNode(_component_a_checkbox, {\n          checked: record.formShow,\n          disabled: record.status === 0,\n          onChange: (e) => _ctx.onCheckboxChange(e, record, 2)\n        }, {\n          default: withCtx(() => [\n            _hoisted_3\n          ]),\n          _: 2\n        }, 1032, [\"checked\", \"disabled\", \"onChange\"]),\n        createVNode(_component_a_checkbox, {\n          checked: record.formEditable,\n          disabled: record.status === 0,\n          onChange: (e) => _ctx.onCheckboxChange(e, record, 3)\n        }, {\n          default: withCtx(() => [\n            _hoisted_4\n          ]),\n          _: 2\n        }, 1032, [\"checked\", \"disabled\", \"onChange\"])\n      ]),\n      _: 1\n    }, 8, [\"onRegister\"])\n  ]);\n}\nvar AuthFieldConfig = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__scopeId\", \"data-v-a4e37bde\"]]);\nexport { AuthFieldConfig as default };\n"],
  "mappings": "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",
  "names": ["default"]
}
