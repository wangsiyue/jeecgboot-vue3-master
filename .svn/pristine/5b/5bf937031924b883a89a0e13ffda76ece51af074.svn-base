{
  "version": 3,
  "sources": ["../../@jeecg/online/AuthFieldTree.js"],
  "sourcesContent": ["var __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nimport { defineComponent, ref, computed, watch, resolveComponent, openBlock, createElementBlock, createBlock, Fragment, createElementVNode, createVNode, withCtx, unref, createTextVNode } from \"vue\";\nimport { useMessage } from \"/@/hooks/web/useMessage\";\nimport { k as authFieldLoadTree, l as loadRoleAuthChecked, s as saveAuthField } from \"./auth.api.js\";\nimport { _ as _export_sfc } from \"./index.js\";\nimport \"/@/utils/http/axios\";\nimport \"/@/components/jeecg/OnLine/JPopupOnlReport.vue\";\nimport \"vue-router\";\nvar AuthFieldTree_vue_vue_type_style_index_0_scoped_true_lang = \"\";\nconst _sfc_main = defineComponent({\n  name: \"AuthFieldTree\",\n  props: {\n    cgformId: { type: String, required: true }\n  },\n  setup(props) {\n    const { createMessage: $message } = useMessage();\n    const roleId = ref(\"\");\n    const authType = ref(1);\n    const autoExpandParent = ref(true);\n    const expandedKeys = ref([]);\n    const checkedKeys = ref([]);\n    const allCode = ref([]);\n    const treeData = ref([]);\n    const authMode = ref(\"\");\n    const disabled = computed(() => !roleId.value);\n    watch(() => props.cgformId, loadTree, { immediate: true });\n    function loadTree() {\n      return __async(this, null, function* () {\n        if (!props.cgformId)\n          return;\n        let result = yield authFieldLoadTree(props.cgformId, authType.value);\n        let trees = [];\n        let codes = [];\n        result.forEach((item) => {\n          if (!codes.includes(item.code)) {\n            codes.push(item.code);\n            trees.push({ key: item.code, title: item.title });\n          }\n        });\n        for (let node of trees) {\n          let children = [];\n          for (let item of result) {\n            if (node.key === item.code) {\n              let temp = getTreeNodeTitle(item);\n              children.push({ key: item.id, title: temp });\n            }\n          }\n          node.children = children;\n        }\n        treeData.value = trees;\n        expandedKeys.value = [...codes];\n        allCode.value = codes;\n      });\n    }\n    function getTreeNodeTitle(item) {\n      let str = \"\";\n      if (item.page == 3) {\n        str += \"\\u5217\\u8868\";\n      } else if (item.page == 5) {\n        str += \"\\u8868\\u5355\";\n      }\n      if (item.control == 3) {\n        str += \"\\u53EF\\u7F16\\u8F91\";\n      } else if (item.control == 5) {\n        str += \"\\u53EF\\u89C1\";\n      }\n      return str;\n    }\n    function loadChecked($roleId, $authMode) {\n      return __async(this, null, function* () {\n        roleId.value = $roleId;\n        authMode.value = $authMode;\n        checkedKeys.value = [];\n        let result = yield loadRoleAuthChecked({\n          roleId: $roleId,\n          cgformId: props.cgformId,\n          type: authType.value,\n          authMode: $authMode\n        });\n        checkedKeys.value = result.map((item) => item.authId);\n      });\n    }\n    function clearChecked() {\n      roleId.value = \"\";\n    }\n    function onRefresh() {\n      loadTree();\n      loadChecked(roleId.value, authMode.value);\n    }\n    function onSave() {\n      return __async(this, null, function* () {\n        let ids = checkedKeys.value.filter((i) => allCode.value.indexOf(i) < 0);\n        yield saveAuthField(roleId.value, props.cgformId, {\n          authId: JSON.stringify(ids),\n          authMode: authMode.value\n        });\n        $message.success(\"\\u4FDD\\u5B58\\u6210\\u529F\");\n      });\n    }\n    function onExpandAll() {\n      expandedKeys.value = [...allCode.value];\n    }\n    function onCloseAll() {\n      expandedKeys.value = [];\n    }\n    function onExpand($expandedKeys) {\n      expandedKeys.value = $expandedKeys;\n      autoExpandParent.value = false;\n    }\n    function clear() {\n      roleId.value = \"\";\n      checkedKeys.value = [];\n    }\n    function onClearSelected() {\n      checkedKeys.value = [];\n    }\n    function onSelectAll() {\n      const selectFun = function(arr) {\n        for (let node of arr) {\n          checkedKeys.value.push(node.key);\n          if (node.children && node.children.length > 0) {\n            selectFun.call(null, node.children);\n          }\n        }\n      };\n      checkedKeys.value = [];\n      selectFun.call(null, unref(treeData));\n    }\n    return {\n      loadChecked,\n      clear,\n      expandedKeys,\n      autoExpandParent,\n      checkedKeys,\n      treeData,\n      disabled,\n      onSave,\n      onExpand,\n      clearChecked,\n      onCloseAll,\n      onExpandAll,\n      onRefresh,\n      onClearSelected,\n      onSelectAll\n    };\n  }\n});\nconst _hoisted_1 = { class: \"onl-auth-tree-btns\" };\nconst _hoisted_2 = /* @__PURE__ */ createTextVNode(\"\\u5237\\u65B0\");\nconst _hoisted_3 = /* @__PURE__ */ createTextVNode(\"\\u5C55\\u5F00\");\nconst _hoisted_4 = /* @__PURE__ */ createTextVNode(\"\\u6298\\u53E0\");\nconst _hoisted_5 = /* @__PURE__ */ createTextVNode(\"\\u4FDD\\u5B58\");\nconst _hoisted_6 = /* @__PURE__ */ createTextVNode(\"\\u5168\\u9009\");\nconst _hoisted_7 = /* @__PURE__ */ createTextVNode(\"\\u91CD\\u7F6E\");\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_empty = resolveComponent(\"a-empty\");\n  const _component_a_button = resolveComponent(\"a-button\");\n  const _component_a_tree = resolveComponent(\"a-tree\");\n  return openBlock(), createElementBlock(\"div\", null, [\n    _ctx.disabled ? (openBlock(), createBlock(_component_a_empty, {\n      key: 0,\n      description: \"\\u8BF7\\u5148\\u9009\\u4E2D\\u5DE6\\u4FA7\\u89D2\\u8272/\\u90E8\\u95E8/\\u7528\\u6237\"\n    })) : _ctx.treeData.length === 0 ? (openBlock(), createBlock(_component_a_empty, {\n      key: 1,\n      description: \"\\u65E0\\u6743\\u9650\\u4FE1\\u606F\"\n    })) : (openBlock(), createElementBlock(Fragment, { key: 2 }, [\n      createElementVNode(\"div\", _hoisted_1, [\n        createVNode(_component_a_button, {\n          onClick: _ctx.onRefresh,\n          size: \"small\",\n          type: \"primary\",\n          preIcon: \"ant-design:redo\",\n          ghost: \"\"\n        }, {\n          default: withCtx(() => [\n            _hoisted_2\n          ]),\n          _: 1\n        }, 8, [\"onClick\"]),\n        createVNode(_component_a_button, {\n          onClick: _ctx.onExpandAll,\n          size: \"small\",\n          type: \"primary\",\n          preIcon: \"ant-design:down-circle\",\n          ghost: \"\"\n        }, {\n          default: withCtx(() => [\n            _hoisted_3\n          ]),\n          _: 1\n        }, 8, [\"onClick\"]),\n        createVNode(_component_a_button, {\n          onClick: _ctx.onCloseAll,\n          size: \"small\",\n          type: \"primary\",\n          preIcon: \"ant-design:up-circle\",\n          ghost: \"\"\n        }, {\n          default: withCtx(() => [\n            _hoisted_4\n          ]),\n          _: 1\n        }, 8, [\"onClick\"]),\n        createVNode(_component_a_button, {\n          onClick: _ctx.onSave,\n          size: \"small\",\n          type: \"primary\",\n          preIcon: \"ant-design:save\",\n          ghost: \"\"\n        }, {\n          default: withCtx(() => [\n            _hoisted_5\n          ]),\n          _: 1\n        }, 8, [\"onClick\"]),\n        createVNode(_component_a_button, {\n          onClick: _ctx.onSelectAll,\n          size: \"small\",\n          type: \"primary\",\n          preIcon: \"ant-design:check\",\n          ghost: \"\"\n        }, {\n          default: withCtx(() => [\n            _hoisted_6\n          ]),\n          _: 1\n        }, 8, [\"onClick\"]),\n        createVNode(_component_a_button, {\n          onClick: _ctx.onClearSelected,\n          size: \"small\",\n          type: \"primary\",\n          preIcon: \"ant-design:undo\",\n          ghost: \"\"\n        }, {\n          default: withCtx(() => [\n            _hoisted_7\n          ]),\n          _: 1\n        }, 8, [\"onClick\"])\n      ]),\n      createVNode(_component_a_tree, {\n        checkable: \"\",\n        checkedKeys: _ctx.checkedKeys,\n        \"onUpdate:checkedKeys\": _cache[0] || (_cache[0] = ($event) => _ctx.checkedKeys = $event),\n        expandedKeys: _ctx.expandedKeys,\n        autoExpandParent: _ctx.autoExpandParent,\n        treeData: _ctx.treeData,\n        onExpand: _ctx.onExpand\n      }, null, 8, [\"checkedKeys\", \"expandedKeys\", \"autoExpandParent\", \"treeData\", \"onExpand\"])\n    ], 64))\n  ]);\n}\nvar AuthFieldTree = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__scopeId\", \"data-v-73e2c712\"]]);\nexport { AuthFieldTree as default };\n"],
  "mappings": "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",
  "names": []
}
