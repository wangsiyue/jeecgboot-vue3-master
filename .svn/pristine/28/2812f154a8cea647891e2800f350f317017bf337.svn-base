{
  "version": 3,
  "sources": ["../../@jeecg/online/ProcessOnlineForm.js"],
  "sourcesContent": ["var __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nimport { O as OnlineForm } from \"./OnlineForm.js\";\nimport { defineComponent, ref, watch, nextTick, resolveComponent, openBlock, createElementBlock, createVNode, withCtx, createCommentVNode, createTextVNode } from \"vue\";\nimport { defHttp } from \"/@/utils/http/axios\";\nimport { g as getRefPromise } from \"./useAutoForm.js\";\nimport { _ as _export_sfc } from \"./index.js\";\nimport \"/@/hooks/web/useMessage\";\nimport \"/@/components/Form/index\";\nimport \"./FormSchemaFactory.js\";\nimport \"/@/components/Form/src/jeecg/components/JUpload\";\nimport \"/@/components/Loading\";\nimport \"./OnlineSubForm.js\";\nimport \"/@/views/system/user/user.api\";\nimport \"/@/store/modules/user\";\nimport \"/@/utils\";\nimport \"/@/utils/desform/customExpression\";\nimport \"/@/components/Form/src/componentMap\";\nimport \"./OnlineSelectCascade.js\";\nimport \"/@/components/jeecg/OnLine/JPopupOnlReport.vue\";\nimport \"vue-router\";\nimport \"./pick.js\";\nimport \"./isArray.js\";\nimport \"./toString.js\";\nimport \"./_arrayPush.js\";\nvar ProcessOnlineForm_vue_vue_type_style_index_0_scoped_true_lang = \"\";\nconst _sfc_main = defineComponent({\n  name: \"ProcessOnlineForm\",\n  inheritAttrs: false,\n  components: {\n    OnlineForm\n  },\n  props: {\n    dataId: {\n      type: String,\n      default: \"\"\n    },\n    tableName: {\n      type: String,\n      default: \"\"\n    },\n    taskId: {\n      type: String,\n      default: \"\"\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    const onlineFormCompRef = ref();\n    const formId = ref(\"\");\n    const formTemplate = ref(1);\n    const isTreeForm = ref(false);\n    const pidFieldName = ref(\"\");\n    const spinLoading = ref(false);\n    watch(() => props.tableName, (val) => {\n      if (!val) {\n        return;\n      }\n      loadFormItems();\n    }, { immediate: true });\n    function loadFormItems() {\n      return __async(this, null, function* () {\n        spinLoading.value = true;\n        const url = `/online/cgform/api/getFormItemBytbname/${props.tableName}`;\n        const params = { taskId: props.taskId };\n        try {\n          let result = yield defHttp.get({ url, params });\n          console.log(\"\\u52A8\\u6001\\u8868\\u5355\\u67E5\\u8BE2\\u7ED3\\u679C\\u662F\\uFF1A\", result);\n          formId.value = result.head.id;\n          formTemplate.value = Number(result.head.formTemplate || 1);\n          isTreeForm.value = result.head.isTree === \"Y\";\n          pidFieldName.value = result.head.treeParentIdField || \"\";\n          yield nextTick(() => __async(this, null, function* () {\n            let myForm = yield getRefPromise(onlineFormCompRef);\n            myForm.createRootProperties(result);\n          }));\n        } catch (e) {\n          console.error(\"\\u6D41\\u7A0B\\u8868\\u5355\\u67E5\\u8BE2\\u5F02\\u5E38\", e);\n        }\n      });\n    }\n    function renderSuccess() {\n      return __async(this, null, function* () {\n        let myForm = yield getRefPromise(onlineFormCompRef);\n        spinLoading.value = false;\n        myForm.show(true, {\n          id: props.dataId\n        });\n      });\n    }\n    const buttonLoading = ref(false);\n    function handleSubmit() {\n      return __async(this, null, function* () {\n        buttonLoading.value = true;\n        onlineFormCompRef.value.handleSubmit();\n      });\n    }\n    function handleSuccess() {\n      buttonLoading.value = false;\n    }\n    return {\n      onlineFormCompRef,\n      formId,\n      formTemplate,\n      isTreeForm,\n      pidFieldName,\n      renderSuccess,\n      handleSuccess,\n      handleSubmit,\n      buttonLoading,\n      spinLoading\n    };\n  }\n});\nconst _hoisted_1 = { class: \"cust-onl-form\" };\nconst _hoisted_2 = {\n  key: 0,\n  style: { \"width\": \"100%\", \"text-align\": \"center\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_3 = /* @__PURE__ */ createTextVNode(\" \\u63D0 \\u4EA4 \");\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_button = resolveComponent(\"a-button\");\n  const _component_online_form = resolveComponent(\"online-form\");\n  const _component_a_spin = resolveComponent(\"a-spin\");\n  return openBlock(), createElementBlock(\"div\", _hoisted_1, [\n    createVNode(_component_a_spin, { spinning: _ctx.spinLoading }, {\n      default: withCtx(() => [\n        createVNode(_component_online_form, {\n          ref: \"onlineFormCompRef\",\n          id: _ctx.formId,\n          disabled: _ctx.disabled,\n          \"form-template\": _ctx.formTemplate,\n          isTree: _ctx.isTreeForm,\n          pidField: _ctx.pidFieldName,\n          onRendered: _ctx.renderSuccess,\n          onSuccess: _ctx.handleSuccess\n        }, {\n          bottom: withCtx(() => [\n            !_ctx.disabled && !_ctx.spinLoading ? (openBlock(), createElementBlock(\"div\", _hoisted_2, [\n              createVNode(_component_a_button, {\n                preIcon: \"ant-design:check\",\n                style: { \"width\": \"126px\" },\n                type: \"primary\",\n                onClick: _ctx.handleSubmit,\n                loading: _ctx.buttonLoading\n              }, {\n                default: withCtx(() => [\n                  _hoisted_3\n                ]),\n                _: 1\n              }, 8, [\"onClick\", \"loading\"])\n            ])) : createCommentVNode(\"\", true)\n          ]),\n          _: 1\n        }, 8, [\"id\", \"disabled\", \"form-template\", \"isTree\", \"pidField\", \"onRendered\", \"onSuccess\"])\n      ]),\n      _: 1\n    }, 8, [\"spinning\"])\n  ]);\n}\nvar ProcessOnlineForm = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__scopeId\", \"data-v-9b256bc4\"]]);\nexport { ProcessOnlineForm as default };\n"],
  "mappings": "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",
  "names": []
}
