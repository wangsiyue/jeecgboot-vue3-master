{
  "version": 3,
  "sources": ["../../@jeecg/online/AuthButtonConfig.js"],
  "sourcesContent": ["var __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nimport { defineComponent, ref, watch, resolveComponent, openBlock, createElementBlock, createVNode, withCtx, createTextVNode } from \"vue\";\nimport { BasicTable, useTable } from \"/@/components/Table\";\nimport { d as authButtonLoadData, e as authButtonEnable, f as authButtonDisable } from \"./auth.api.js\";\nimport { b as authButtonColumns, c as authButtonFixedList } from \"./auth.data.js\";\nimport { _ as _export_sfc } from \"./index.js\";\nimport { c as cloneDeep } from \"./cloneDeep.js\";\nimport \"/@/utils/http/axios\";\nimport \"/@/components/jeecg/OnLine/JPopupOnlReport.vue\";\nimport \"/@/hooks/web/useMessage\";\nimport \"vue-router\";\nimport \"./_arrayPush.js\";\nimport \"./isArray.js\";\nconst _sfc_main = defineComponent({\n  name: \"AuthButtonConfig\",\n  components: { BasicTable },\n  props: {\n    headId: {\n      type: String,\n      default: \"\",\n      required: true\n    }\n  },\n  setup(props) {\n    const cgformId = ref(\"\");\n    const pageType = ref(2);\n    const pageControlList = ref(3);\n    const pageControlForm = ref(5);\n    const [registerTable, { reload }] = useTable({\n      api: loadData,\n      rowKey: \"code\",\n      bordered: true,\n      columns: authButtonColumns,\n      showIndexColumn: false\n    });\n    watch(() => props.headId, (headId) => {\n      cgformId.value = headId.split(\"?\")[0];\n      reload().catch(() => null);\n    }, { immediate: true });\n    function loadData(params) {\n      return __async(this, null, function* () {\n        let result = yield authButtonLoadData(cgformId.value, params);\n        let { authList, buttonList } = result;\n        let dataSource = [];\n        for (let btn of cloneDeep(authButtonFixedList)) {\n          let item = {\n            status: 0,\n            page: pageControlList.value\n          };\n          let auth = authList.find((auth2) => auth2.code == btn.code);\n          Object.assign(btn, item, auth);\n          dataSource.push(btn);\n        }\n        return concatCustomButton(authList, buttonList, dataSource);\n      });\n    }\n    function concatCustomButton(authList, buttonList, dataSource) {\n      for (let btn of buttonList) {\n        let auth = authList.find((auth2) => auth2.code == btn.buttonCode);\n        let item = {\n          code: btn.buttonCode,\n          title: btn.buttonName,\n          status: 0,\n          page: btn.buttonStyle == \"form\" ? pageControlForm.value : pageControlList.value\n        };\n        dataSource.push(Object.assign(item, auth));\n      }\n      return dataSource;\n    }\n    function onUpdateStatus(flag, record) {\n      return __async(this, null, function* () {\n        flag ? doEnableAuthButton(record) : doDisableAuthButton(record);\n      });\n    }\n    function doEnableAuthButton(record) {\n      return __async(this, null, function* () {\n        let result = yield authButtonEnable({\n          id: record.id,\n          code: record.code,\n          page: record.page,\n          cgformId: cgformId.value,\n          type: pageType.value,\n          control: 5,\n          status: 1\n        });\n        record.id = result.id;\n        record.status = 1;\n      });\n    }\n    function doDisableAuthButton(record) {\n      return __async(this, null, function* () {\n        yield authButtonDisable(record.id);\n        record.status = 0;\n      });\n    }\n    return { registerTable, onUpdateStatus };\n  }\n});\nconst _hoisted_1 = { class: \"auth-field-config\" };\nconst _hoisted_2 = /* @__PURE__ */ createTextVNode(\" \\u53EF\\u89C1 \");\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_switch = resolveComponent(\"a-switch\");\n  const _component_BasicTable = resolveComponent(\"BasicTable\");\n  return openBlock(), createElementBlock(\"div\", _hoisted_1, [\n    createVNode(_component_BasicTable, { onRegister: _ctx.registerTable }, {\n      switch: withCtx(({ text, record }) => [\n        createVNode(_component_a_switch, {\n          size: \"small\",\n          checked: record.status === 1,\n          onChange: (flag) => _ctx.onUpdateStatus(flag, record)\n        }, null, 8, [\"checked\", \"onChange\"])\n      ]),\n      control: withCtx(() => [\n        _hoisted_2\n      ]),\n      _: 1\n    }, 8, [\"onRegister\"])\n  ]);\n}\nvar AuthButtonConfig = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { AuthButtonConfig as default };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AA2BA,OAAO;AA3BP,IAAI,UAAU,CAAC,QAAQ,aAAa,cAAc;AAChD,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,QAAI,YAAY,CAAC,UAAU;AACzB,UAAI;AACF,aAAK,UAAU,KAAK,KAAK,CAAC;AAAA,MAC5B,SAAS,GAAP;AACA,eAAO,CAAC;AAAA,MACV;AAAA,IACF;AACA,QAAI,WAAW,CAAC,UAAU;AACxB,UAAI;AACF,aAAK,UAAU,MAAM,KAAK,CAAC;AAAA,MAC7B,SAAS,GAAP;AACA,eAAO,CAAC;AAAA,MACV;AAAA,IACF;AACA,QAAI,OAAO,CAAC,MAAM,EAAE,OAAO,QAAQ,EAAE,KAAK,IAAI,QAAQ,QAAQ,EAAE,KAAK,EAAE,KAAK,WAAW,QAAQ;AAC/F,UAAM,YAAY,UAAU,MAAM,QAAQ,WAAW,GAAG,KAAK,CAAC;AAAA,EAChE,CAAC;AACH;AAaA,IAAM,YAAY,gBAAgB;AAAA,EAChC,MAAM;AAAA,EACN,YAAY,EAAE,YAAAA,SAAW;AAAA,EACzB,OAAO;AAAA,IACL,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,MACT,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EACA,MAAM,OAAO;AACX,UAAM,WAAW,IAAI,EAAE;AACvB,UAAM,WAAW,IAAI,CAAC;AACtB,UAAM,kBAAkB,IAAI,CAAC;AAC7B,UAAM,kBAAkB,IAAI,CAAC;AAC7B,UAAM,CAAC,eAAe,EAAE,OAAO,CAAC,IAAI,SAAS;AAAA,MAC3C,KAAK;AAAA,MACL,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,SAAS;AAAA,MACT,iBAAiB;AAAA,IACnB,CAAC;AACD,UAAM,MAAM,MAAM,QAAQ,CAAC,WAAW;AACpC,eAAS,QAAQ,OAAO,MAAM,GAAG,EAAE;AACnC,aAAO,EAAE,MAAM,MAAM,IAAI;AAAA,IAC3B,GAAG,EAAE,WAAW,KAAK,CAAC;AACtB,aAAS,SAAS,QAAQ;AACxB,aAAO,QAAQ,MAAM,MAAM,aAAa;AACtC,YAAI,SAAS,MAAM,mBAAmB,SAAS,OAAO,MAAM;AAC5D,YAAI,EAAE,UAAU,WAAW,IAAI;AAC/B,YAAI,aAAa,CAAC;AAClB,iBAAS,OAAO,UAAU,mBAAmB,GAAG;AAC9C,cAAI,OAAO;AAAA,YACT,QAAQ;AAAA,YACR,MAAM,gBAAgB;AAAA,UACxB;AACA,cAAI,OAAO,SAAS,KAAK,CAAC,UAAU,MAAM,QAAQ,IAAI,IAAI;AAC1D,iBAAO,OAAO,KAAK,MAAM,IAAI;AAC7B,qBAAW,KAAK,GAAG;AAAA,QACrB;AACA,eAAO,mBAAmB,UAAU,YAAY,UAAU;AAAA,MAC5D,CAAC;AAAA,IACH;AACA,aAAS,mBAAmB,UAAU,YAAY,YAAY;AAC5D,eAAS,OAAO,YAAY;AAC1B,YAAI,OAAO,SAAS,KAAK,CAAC,UAAU,MAAM,QAAQ,IAAI,UAAU;AAChE,YAAI,OAAO;AAAA,UACT,MAAM,IAAI;AAAA,UACV,OAAO,IAAI;AAAA,UACX,QAAQ;AAAA,UACR,MAAM,IAAI,eAAe,SAAS,gBAAgB,QAAQ,gBAAgB;AAAA,QAC5E;AACA,mBAAW,KAAK,OAAO,OAAO,MAAM,IAAI,CAAC;AAAA,MAC3C;AACA,aAAO;AAAA,IACT;AACA,aAAS,eAAe,MAAM,QAAQ;AACpC,aAAO,QAAQ,MAAM,MAAM,aAAa;AACtC,eAAO,mBAAmB,MAAM,IAAI,oBAAoB,MAAM;AAAA,MAChE,CAAC;AAAA,IACH;AACA,aAAS,mBAAmB,QAAQ;AAClC,aAAO,QAAQ,MAAM,MAAM,aAAa;AACtC,YAAI,SAAS,MAAM,iBAAiB;AAAA,UAClC,IAAI,OAAO;AAAA,UACX,MAAM,OAAO;AAAA,UACb,MAAM,OAAO;AAAA,UACb,UAAU,SAAS;AAAA,UACnB,MAAM,SAAS;AAAA,UACf,SAAS;AAAA,UACT,QAAQ;AAAA,QACV,CAAC;AACD,eAAO,KAAK,OAAO;AACnB,eAAO,SAAS;AAAA,MAClB,CAAC;AAAA,IACH;AACA,aAAS,oBAAoB,QAAQ;AACnC,aAAO,QAAQ,MAAM,MAAM,aAAa;AACtC,cAAM,kBAAkB,OAAO,EAAE;AACjC,eAAO,SAAS;AAAA,MAClB,CAAC;AAAA,IACH;AACA,WAAO,EAAE,eAAe,eAAe;AAAA,EACzC;AACF,CAAC;AACD,IAAM,aAAa,EAAE,OAAO,oBAAoB;AAChD,IAAM,aAA6B,gBAAgB,gBAAgB;AACnE,SAAS,YAAY,MAAM,QAAQ,QAAQ,QAAQ,OAAO,UAAU;AAClE,QAAM,sBAAsB,iBAAiB,UAAU;AACvD,QAAM,wBAAwB,iBAAiB,YAAY;AAC3D,SAAO,UAAU,GAAG,mBAAmB,OAAO,YAAY;AAAA,IACxD,YAAY,uBAAuB,EAAE,YAAY,KAAK,cAAc,GAAG;AAAA,MACrE,QAAQ,QAAQ,CAAC,EAAE,MAAM,OAAO,MAAM;AAAA,QACpC,YAAY,qBAAqB;AAAA,UAC/B,MAAM;AAAA,UACN,SAAS,OAAO,WAAW;AAAA,UAC3B,UAAU,CAAC,SAAS,KAAK,eAAe,MAAM,MAAM;AAAA,QACtD,GAAG,MAAM,GAAG,CAAC,WAAW,UAAU,CAAC;AAAA,MACrC,CAAC;AAAA,MACD,SAAS,QAAQ,MAAM;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,MACD,GAAG;AAAA,IACL,GAAG,GAAG,CAAC,YAAY,CAAC;AAAA,EACtB,CAAC;AACH;AACA,IAAI,mBAAmC,YAAY,WAAW,CAAC,CAAC,UAAU,WAAW,CAAC,CAAC;",
  "names": ["default"]
}
