{
  "version": 3,
  "sources": ["../../@jeecg/online/JOnlineSearchSelect.js"],
  "sourcesContent": ["import { useDebounceFn } from \"@vueuse/core\";\nimport { defHttp } from \"/@/utils/http/axios\";\nimport { useMessage } from \"/@/hooks/web/useMessage\";\nimport { ref, watch, resolveComponent, openBlock, createBlock, withCtx, createElementBlock, Fragment, renderList, createTextVNode, toDisplayString } from \"vue\";\nimport { _ as _export_sfc } from \"./index.js\";\nimport \"/@/components/jeecg/OnLine/JPopupOnlReport.vue\";\nimport \"vue-router\";\nconst { createMessage: $message } = useMessage();\nconst _sfc_main = {\n  name: \"JOnlineSearchSelect\",\n  props: {\n    placeholder: {\n      type: String,\n      default: \"\",\n      required: false\n    },\n    value: {\n      type: String,\n      required: false\n    },\n    sql: {\n      type: String,\n      required: true\n    }\n  },\n  emits: [\"update:value\"],\n  setup(props, { emit }) {\n    let selected = ref(\"\");\n    let selectOptions = ref([]);\n    watch(() => props.value, (newVal) => {\n      if (!newVal) {\n        selected.value = void 0;\n      } else {\n        selected.value = newVal;\n      }\n    }, { immediate: true });\n    watch(() => props.sql, () => {\n      resetOptions();\n    }, { immediate: true });\n    const handleSearch = useDebounceFn(searchByKeyword, 800);\n    function searchByKeyword(keyword = \"\") {\n      let params = {\n        keyword\n      };\n      let url = \"/online/cgreport/api/getReportDictList?sql=\" + props.sql;\n      defHttp.get({ url, params }, { isTransformResponse: false }).then((res) => {\n        if (res.success) {\n          if (res.result && res.result.length > 0) {\n            selectOptions.value = res.result;\n          } else {\n            selectOptions.value = [];\n          }\n        } else {\n          $message.warning(res.message);\n        }\n      });\n    }\n    function handleChange(value) {\n      emit(\"update:value\", value);\n      if (!value || value == \"\") {\n        resetOptions();\n      }\n    }\n    function resetOptions() {\n      selectOptions.value = [];\n      searchByKeyword();\n    }\n    return {\n      selectOptions,\n      handleSearch,\n      handleChange,\n      selected\n    };\n  }\n};\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_select_option = resolveComponent(\"a-select-option\");\n  const _component_a_select = resolveComponent(\"a-select\");\n  return openBlock(), createBlock(_component_a_select, {\n    value: $setup.selected,\n    placeholder: $props.placeholder,\n    \"show-search\": \"\",\n    \"default-active-first-option\": false,\n    \"show-arrow\": true,\n    \"filter-option\": false,\n    \"not-found-content\": null,\n    onSearch: $setup.handleSearch,\n    onChange: $setup.handleChange,\n    allowClear: \"\"\n  }, {\n    default: withCtx(() => [\n      (openBlock(true), createElementBlock(Fragment, null, renderList($setup.selectOptions, (d) => {\n        return openBlock(), createBlock(_component_a_select_option, {\n          key: d.value\n        }, {\n          default: withCtx(() => [\n            createTextVNode(toDisplayString(d.text), 1)\n          ]),\n          _: 2\n        }, 1024);\n      }), 128))\n    ]),\n    _: 1\n  }, 8, [\"value\", \"placeholder\", \"onSearch\", \"onChange\"]);\n}\nvar JOnlineSearchSelect = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { JOnlineSearchSelect as default };\n"],
  "mappings": "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",
  "names": []
}
