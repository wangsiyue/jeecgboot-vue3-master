{
  "version": 3,
  "sources": ["../../@jeecg/online/EnhanceJsHistory.js"],
  "sourcesContent": ["var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nimport { formatToDate } from \"/@/utils/dateUtil\";\nimport { defineComponent, ref, nextTick, resolveComponent, openBlock, createBlock, withCtx, createVNode, normalizeClass, createElementVNode, toDisplayString, createTextVNode } from \"vue\";\nimport { BasicModal, useModalInner } from \"/@/components/Modal\";\nimport { JCodeEditor } from \"/@/components/Form\";\nimport \"/@/store\";\nimport { defineStore } from \"pinia\";\nimport { createLocalStorage } from \"/@/utils/cache\";\nimport { _ as _export_sfc } from \"./index.js\";\nconst ls = createLocalStorage();\nconst ENHANCE_PRE = \"enhance_\";\nconst useEnhanceStore = defineStore({\n  id: \"online-cgform-enhance\",\n  state: () => ({\n    enhanceJs: {}\n  }),\n  getters: {},\n  actions: {\n    getEnhanceJs(code) {\n      this.enhanceJs[code] = ls.get(ENHANCE_PRE + code);\n      return this.enhanceJs[code];\n    },\n    addEnhanceJs(record) {\n      if (!this.enhanceJs[record.code]) {\n        this.enhanceJs[record.code] = [__spreadValues({}, record)];\n      } else {\n        this.enhanceJs[record.code].push(__spreadValues({}, record));\n      }\n      let enhanceJsArray = this.enhanceJs[record.code];\n      while (enhanceJsArray.length > 16) {\n        enhanceJsArray.shift();\n      }\n      ls.set(ENHANCE_PRE + record.code, enhanceJsArray);\n    }\n  }\n});\nvar EnhanceJsHistory_vue_vue_type_style_index_0_scoped_true_lang = \"\";\nconst _sfc_main = defineComponent({\n  name: \"EnhanceJsHistory\",\n  components: { BasicModal, JCodeEditor },\n  setup() {\n    const enhanceStore = useEnhanceStore();\n    const codeEditorRef = ref();\n    const confirmLoading = ref(false);\n    const dataList = ref([]);\n    const jsStr = ref(\"\");\n    const activeIndex = ref(0);\n    const [registerModal, { closeModal }] = useModalInner((data) => __async(this, null, function* () {\n      show(data.code, data.type);\n    }));\n    function show(code, type) {\n      jsStr.value = \"\";\n      dataList.value = [];\n      let arr = enhanceStore.getEnhanceJs(code);\n      let ls2 = [];\n      let index = 0;\n      for (let item of arr) {\n        if (item.type === type) {\n          index++;\n          ls2.push(Object.assign({}, item, { index }));\n        }\n      }\n      if (ls2 && ls2.length > 0) {\n        ls2.sort((a, b) => {\n          return b.date - a.date;\n        });\n      }\n      dataList.value = [...ls2];\n      nextTick(() => fullCode(ls2[0]));\n    }\n    function onCancel() {\n      closeModal();\n    }\n    function getFormatDate(date) {\n      return formatToDate(date, \"yyyy-MM-DD HH:mm:ss\");\n    }\n    function fullCode(item) {\n      activeIndex.value = item.index;\n      codeEditorRef.value.setValue(item.str);\n    }\n    return {\n      codeEditorRef,\n      fullCode,\n      registerModal,\n      getFormatDate,\n      onCancel,\n      confirmLoading,\n      dataList,\n      jsStr,\n      activeIndex\n    };\n  }\n});\nconst _hoisted_1 = /* @__PURE__ */ createTextVNode(\"\\u4FDD\\u5B58\\u65F6\\u95F4\");\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = /* @__PURE__ */ createTextVNode(\"\\u5173\\u95ED\");\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_divider = resolveComponent(\"a-divider\");\n  const _component_a_list_item = resolveComponent(\"a-list-item\");\n  const _component_a_list = resolveComponent(\"a-list\");\n  const _component_a_layout_sider = resolveComponent(\"a-layout-sider\");\n  const _component_JCodeEditor = resolveComponent(\"JCodeEditor\");\n  const _component_a_layout_content = resolveComponent(\"a-layout-content\");\n  const _component_a_layout = resolveComponent(\"a-layout\");\n  const _component_a_spin = resolveComponent(\"a-spin\");\n  const _component_a_button = resolveComponent(\"a-button\");\n  const _component_BasicModal = resolveComponent(\"BasicModal\");\n  return openBlock(), createBlock(_component_BasicModal, {\n    onRegister: _ctx.registerModal,\n    title: \"JS\\u589E\\u5F3A\\u5386\\u53F2\\u8BB0\\u5F55\",\n    width: 1200,\n    maskClosable: false,\n    confirmLoading: _ctx.confirmLoading,\n    defaultFullscreen: \"\",\n    onCancel: _ctx.onCancel\n  }, {\n    footer: withCtx(() => [\n      createVNode(_component_a_button, { onClick: _ctx.onCancel }, {\n        default: withCtx(() => [\n          _hoisted_3\n        ]),\n        _: 1\n      }, 8, [\"onClick\"])\n    ]),\n    default: withCtx(() => [\n      createVNode(_component_a_spin, { spinning: _ctx.confirmLoading }, {\n        default: withCtx(() => [\n          createVNode(_component_a_layout, null, {\n            default: withCtx(() => [\n              createVNode(_component_a_layout_sider, { theme: \"light\" }, {\n                default: withCtx(() => [\n                  createVNode(_component_a_list, {\n                    bordered: \"\",\n                    dataSource: _ctx.dataList,\n                    class: normalizeClass(\"enhance-list\")\n                  }, {\n                    header: withCtx(() => [\n                      createElementVNode(\"div\", null, [\n                        createVNode(_component_a_divider, { style: { \"margin\": \"0\" } }, {\n                          default: withCtx(() => [\n                            _hoisted_1\n                          ]),\n                          _: 1\n                        })\n                      ])\n                    ]),\n                    renderItem: withCtx(({ item }) => [\n                      createVNode(_component_a_list_item, {\n                        class: normalizeClass(_ctx.activeIndex === item.index ? \"bg-blue\" : \"\")\n                      }, {\n                        default: withCtx(() => [\n                          createElementVNode(\"a\", {\n                            onClick: ($event) => _ctx.fullCode(item)\n                          }, toDisplayString(_ctx.getFormatDate(item.date)), 9, _hoisted_2)\n                        ]),\n                        _: 2\n                      }, 1032, [\"class\"])\n                    ]),\n                    _: 1\n                  }, 8, [\"dataSource\"])\n                ]),\n                _: 1\n              }),\n              createVNode(_component_a_layout, null, {\n                default: withCtx(() => [\n                  createVNode(_component_a_layout_content, { style: { margin: \"8px 8px\", padding: \"8px\", background: \"#fff\", minHeight: \"280px\" } }, {\n                    default: withCtx(() => [\n                      createVNode(_component_JCodeEditor, {\n                        ref: \"codeEditorRef\",\n                        language: \"javascript\",\n                        fullScreen: true,\n                        lineNumbers: false,\n                        \"language-change\": false\n                      }, null, 512)\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"spinning\"])\n    ]),\n    _: 1\n  }, 8, [\"onRegister\", \"confirmLoading\", \"onCancel\"]);\n}\nvar EnhanceJsHistory = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__scopeId\", \"data-v-3b0bad10\"]]);\nvar EnhanceJsHistory$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  \"default\": EnhanceJsHistory\n}, Symbol.toStringTag, { value: \"Module\" }));\nexport { EnhanceJsHistory as E, EnhanceJsHistory$1 as a, useEnhanceStore as u };\n"],
  "mappings": "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",
  "names": ["default"]
}
