{
  "version": 3,
  "sources": ["../../@jeecg/online/AuthDataConfig.js"],
  "sourcesContent": ["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nimport { defineComponent, ref, watch, reactive, resolveComponent, openBlock, createElementBlock, createVNode, withCtx, normalizeProps, guardReactiveProps, createTextVNode, nextTick } from \"vue\";\nimport { BasicTable, TableAction, useTable } from \"/@/components/Table\";\nimport { BasicModal, useModal } from \"/@/components/Modal\";\nimport { BasicForm, useForm } from \"/@/components/Form\";\nimport { g as authDataLoadData, h as authDataSaveOrUpdate, i as authDataUpdateStatus, j as authDataDelete } from \"./auth.api.js\";\nimport { d as authDataColumns, u as useAuthDataFormSchemas, U as USE_SQL_RULES } from \"./auth.data.js\";\nimport { _ as _export_sfc } from \"./index.js\";\nimport \"/@/utils/http/axios\";\nimport \"/@/components/jeecg/OnLine/JPopupOnlReport.vue\";\nimport \"/@/hooks/web/useMessage\";\nimport \"vue-router\";\nconst _sfc_main = defineComponent({\n  name: \"AuthDataConfig\",\n  components: { BasicTable, TableAction, BasicModal, BasicForm },\n  props: {\n    cgformId: { type: String, required: true },\n    authFields: { type: Array, required: true }\n  },\n  setup(props) {\n    const loading = ref(false);\n    const [registerTable, { reload, setLoading }] = useTable({\n      api: (params) => authDataLoadData(props.cgformId, params),\n      rowKey: \"id\",\n      bordered: true,\n      columns: authDataColumns,\n      showIndexColumn: false,\n      actionColumn: {\n        width: 120,\n        title: \"\\u64CD\\u4F5C\",\n        fixed: false,\n        dataIndex: \"action\",\n        slots: { customRender: \"action\" }\n      }\n    });\n    watch(loading, (l) => setLoading(l));\n    const [registerModal, { openModal, closeModal }] = useModal();\n    const formModalProps = reactive({\n      title: \"\",\n      width: 800,\n      confirmLoading: false,\n      onOk: onSubmit,\n      onCancel: closeModal,\n      onRegister: registerModal\n    });\n    let isUpdate = false;\n    let formRecord = {};\n    const { formSchemas } = useAuthDataFormSchemas(props, {\n      onRuleOperatorChange\n    });\n    const [registerForm, { validate, resetFields, setFieldsValue }] = useForm({\n      schemas: formSchemas,\n      showActionButtonGroup: false,\n      labelAlign: \"right\"\n    });\n    watch(() => props.cgformId, () => {\n      reload().catch(() => null);\n    }, { immediate: true });\n    function openFormModal(data) {\n      return __async(this, null, function* () {\n        var _a;\n        isUpdate = (_a = data.isUpdate) != null ? _a : false;\n        formModalProps.title = data.title;\n        openModal();\n        yield nextTick();\n        yield resetFields();\n        formRecord = Object.assign({}, data.record);\n        yield setFieldsValue(formRecord);\n      });\n    }\n    function onAdd() {\n      openFormModal({ title: \"\\u65B0\\u589E\" });\n    }\n    function onEdit(record) {\n      openFormModal({ title: \"\\u7F16\\u8F91\", record, isUpdate: true });\n    }\n    function onDelete(id) {\n      loading.value = true;\n      authDataDelete(id).then(reload).finally(() => loading.value = false);\n    }\n    function onSubmit() {\n      return __async(this, null, function* () {\n        try {\n          formModalProps.confirmLoading = true;\n          let formData = yield validate();\n          formData = Object.assign({}, formRecord, formData);\n          if (formData.ruleOperator == USE_SQL_RULES) {\n            formData.ruleColumn = \"\";\n          }\n          formData.cgformId = props.cgformId;\n          yield authDataSaveOrUpdate(formData, isUpdate);\n          reload();\n          closeModal();\n        } finally {\n          formModalProps.confirmLoading = false;\n        }\n      });\n    }\n    function onUpdateStatus(record) {\n      loading.value = true;\n      let status = Math.abs(record.status - 1);\n      authDataUpdateStatus(__spreadProps(__spreadValues({}, record), { status })).then(() => {\n        record.status = status;\n      }).finally(() => {\n        loading.value = false;\n      });\n    }\n    function onRuleOperatorChange(val) {\n      if (val == USE_SQL_RULES) {\n        setFieldsValue({\n          ruleColumn: \"\"\n        });\n      }\n    }\n    function getTableAction(record) {\n      return [\n        {\n          label: \"\\u7F16\\u8F91\",\n          onClick: () => onEdit(record)\n        }\n      ];\n    }\n    function getDropDownAction(record) {\n      return [\n        {\n          label: \"\\u5220\\u9664\",\n          popConfirm: {\n            title: \"\\u786E\\u5B9A\\u5220\\u9664\\u5417\\uFF1F\",\n            placement: \"left\",\n            confirm: () => onDelete(record.id)\n          }\n        }\n      ];\n    }\n    return {\n      loading,\n      formModalProps,\n      onAdd,\n      onUpdateStatus,\n      getTableAction,\n      getDropDownAction,\n      registerTable,\n      registerModal,\n      registerForm\n    };\n  }\n});\nconst _hoisted_1 = /* @__PURE__ */ createTextVNode(\"\\u65B0\\u589E\");\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_button = resolveComponent(\"a-button\");\n  const _component_a_switch = resolveComponent(\"a-switch\");\n  const _component_TableAction = resolveComponent(\"TableAction\");\n  const _component_BasicTable = resolveComponent(\"BasicTable\");\n  const _component_BasicForm = resolveComponent(\"BasicForm\");\n  const _component_a_spin = resolveComponent(\"a-spin\");\n  const _component_BasicModal = resolveComponent(\"BasicModal\");\n  return openBlock(), createElementBlock(\"div\", null, [\n    createVNode(_component_BasicTable, {\n      onRegister: _ctx.registerTable,\n      loading: _ctx.loading\n    }, {\n      tableTitle: withCtx(() => [\n        createVNode(_component_a_button, {\n          onClick: _ctx.onAdd,\n          type: \"primary\",\n          preIcon: \"ant-design:plus\"\n        }, {\n          default: withCtx(() => [\n            _hoisted_1\n          ]),\n          _: 1\n        }, 8, [\"onClick\"])\n      ]),\n      switch: withCtx(({ text, record }) => [\n        createVNode(_component_a_switch, {\n          size: \"small\",\n          checked: record.status === 1,\n          onClick: () => _ctx.onUpdateStatus(record)\n        }, null, 8, [\"checked\", \"onClick\"])\n      ]),\n      action: withCtx(({ record }) => [\n        createVNode(_component_TableAction, {\n          actions: _ctx.getTableAction(record),\n          dropDownActions: _ctx.getDropDownAction(record)\n        }, null, 8, [\"actions\", \"dropDownActions\"])\n      ]),\n      _: 1\n    }, 8, [\"onRegister\", \"loading\"]),\n    createVNode(_component_BasicModal, normalizeProps(guardReactiveProps(_ctx.formModalProps)), {\n      default: withCtx(() => [\n        createVNode(_component_a_spin, {\n          spinning: _ctx.formModalProps.confirmLoading\n        }, {\n          default: withCtx(() => [\n            createVNode(_component_BasicForm, { onRegister: _ctx.registerForm }, null, 8, [\"onRegister\"])\n          ]),\n          _: 1\n        }, 8, [\"spinning\"])\n      ]),\n      _: 1\n    }, 16)\n  ]);\n}\nvar AuthDataConfig = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { AuthDataConfig as default };\n"],
  "mappings": "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",
  "names": ["default"]
}
